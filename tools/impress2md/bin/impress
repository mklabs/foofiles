#!/usr/bin/env node

var fs = require('fs'),
  path = require('path'),
  nopt = require('nopt'),
  Impress = require('../lib/impress');

var opts = nopt().argv,
  input = opts.remain[0] ? path.resolve(opts.remain[0]) : '';

// got file input, do the file read ourselves, otherwise input stream is stdin
input = input ? fs.createReadStream(input) : process.openStdin();

input.pipe(new Impress(opts)).pipe(process.stdout);
